<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="com.baozun.scm.primservice.whoperation.dao.odo.WhOdoAddressDao">
    <resultMap id="WhOdoAddressResultExt" type="com.baozun.scm.primservice.whoperation.model.odo.WhOdoAddress">
    </resultMap>

    <!-- 用于select查询公用抽取的列 -->
    <sql id="whOdoAddressColumnsExt">
        <![CDATA[
                id as id,
                odo_id as odoId,
                account as account,
                distribution_target_name as distributionTargetName,
                distribution_target_mobile_phone as distributionTargetMobilePhone,
                distribution_target_telephone as distributionTargetTelephone,
                distribution_target_country as distributionTargetCountry,
                distribution_target_province as distributionTargetProvince,
                distribution_target_city as distributionTargetCity,
                distribution_target_district as distributionTargetDistrict,
                distribution_target_villages_towns as distributionTargetVillagesTowns,
                distribution_target_address as distributionTargetAddress,
                distribution_target_email as distributionTargetEmail,
                distribution_target_zip as distributionTargetZip,
                consignee_target_name as consigneeTargetName,
                consignee_target_mobile_phone as consigneeTargetMobilePhone,
                consignee_target_telephone as consigneeTargetTelephone,
                consignee_target_country as consigneeTargetCountry,
                consignee_target_province as consigneeTargetProvince,
                consignee_target_city as consigneeTargetCity,
                consignee_target_district as consigneeTargetDistrict,
                consignee_target_villages_towns as consigneeTargetVillagesTowns,
                consignee_target_address as consigneeTargetAddress,
                consignee_target_email as consigneeTargetEmail,
                consignee_target_zip as consigneeTargetZip,
                ou_id as ouId
        ]]>
    </sql>

    <sql id="whOdoAddressDynamicWhereExt">
        <!-- ognl访问静态方法的表达式 为@class@method(args),以下为调用rapid中的Ognl.isNotEmpty()方法,还有其它方法如isNotBlank()可以使用，具体请查看Ognl类 -->
        <where>

            <if test="id!=null">
                and id = #{id}
            </if>

            <if test="odoId!=null">
                and odo_id = #{odoId}
            </if>

            <if test="account!=null and account!=''">
                and account = #{account}
            </if>

            <if test="distributionTargetName!=null and distributionTargetName!=''">
                and distribution_target_name = #{distributionTargetName}
            </if>

            <if test="distributionTargetMobilePhone!=null and distributionTargetMobilePhone!=''">
                and distribution_target_mobile_phone = #{distributionTargetMobilePhone}
            </if>

            <if test="distributionTargetTelephone!=null and distributionTargetTelephone!=''">
                and distribution_target_telephone = #{distributionTargetTelephone}
            </if>

            <if test="distributionTargetCountry!=null and distributionTargetCountry!=''">
                and distribution_target_country = #{distributionTargetCountry}
            </if>

            <if test="distributionTargetProvince!=null and distributionTargetProvince!=''">
                and distribution_target_province = #{distributionTargetProvince}
            </if>

            <if test="distributionTargetCity!=null and distributionTargetCity!=''">
                and distribution_target_city = #{distributionTargetCity}
            </if>

            <if test="distributionTargetDistrict!=null and distributionTargetDistrict!=''">
                and distribution_target_district = #{distributionTargetDistrict}
            </if>

            <if test="distributionTargetVillagesTowns!=null and distributionTargetVillagesTowns!=''">
                and distribution_target_villages_towns = #{distributionTargetVillagesTowns}
            </if>

            <if test="distributionTargetAddress!=null and distributionTargetAddress!=''">
                and distribution_target_address = #{distributionTargetAddress}
            </if>

            <if test="distributionTargetEmail!=null and distributionTargetEmail!=''">
                and distribution_target_email = #{distributionTargetEmail}
            </if>

            <if test="distributionTargetZip!=null and distributionTargetZip!=''">
                and distribution_target_zip = #{distributionTargetZip}
            </if>

            <if test="consigneeTargetName!=null and consigneeTargetName!=''">
                and consignee_target_name = #{consigneeTargetName}
            </if>

            <if test="consigneeTargetMobilePhone!=null and consigneeTargetMobilePhone!=''">
                and consignee_target_mobile_phone = #{consigneeTargetMobilePhone}
            </if>

            <if test="consigneeTargetTelephone!=null and consigneeTargetTelephone!=''">
                and consignee_target_telephone = #{consigneeTargetTelephone}
            </if>

            <if test="consigneeTargetCountry!=null and consigneeTargetCountry!=''">
                and consignee_target_country = #{consigneeTargetCountry}
            </if>

            <if test="consigneeTargetProvince!=null and consigneeTargetProvince!=''">
                and consignee_target_province = #{consigneeTargetProvince}
            </if>

            <if test="consigneeTargetCity!=null and consigneeTargetCity!=''">
                and consignee_target_city = #{consigneeTargetCity}
            </if>

            <if test="consigneeTargetDistrict!=null and consigneeTargetDistrict!=''">
                and consignee_target_district = #{consigneeTargetDistrict}
            </if>

            <if test="consigneeTargetVillagesTowns!=null and consigneeTargetVillagesTowns!=''">
                and consignee_target_villages_towns = #{consigneeTargetVillagesTowns}
            </if>

            <if test="consigneeTargetAddress!=null and consigneeTargetAddress!=''">
                and consignee_target_address = #{consigneeTargetAddress}
            </if>

            <if test="consigneeTargetEmail!=null and consigneeTargetEmail!=''">
                and consignee_target_email = #{consigneeTargetEmail}
            </if>

            <if test="consigneeTargetZip!=null and consigneeTargetZip!=''">
                and consignee_target_zip = #{consigneeTargetZip}
            </if>

            <if test="ouId!=null">
                and ou_id = #{ouId}
            </if>
        </where>
    </sql>
<select id="findOdoAddressByOdoId" parameterType="map" resultMap="WhOdoAddressResult" flushCache="false">
        select
        <include refid="whOdoAddressColumns"/>
        <![CDATA[
                from t_wh_odo_address 
                where 
                odo_id = #{odoId}  and ou_id=#{ouId}
            ]]>
    </select>
    
    <select id="findOdoAddressByIdOuId" parameterType="map" resultMap="WhOdoAddressResult" flushCache="false">
        select
        <include refid="whOdoAddressColumns"/>
        <![CDATA[
                from t_wh_odo_address 
                where 
                id = #{id} and ou_id=#{ouId}
            ]]>
    </select>
    
    
    <select id="findObject" resultMap="WhOdoAddressResultExt">
		select
		<include refid="whOdoAddressColumnsExt" />
		from t_wh_odo_address
		<include refid="whOdoAddressDynamicWhereExt" />
	</select>
</mapper>
